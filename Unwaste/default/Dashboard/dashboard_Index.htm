<!DOCTYPE html>
<html lang="en">

<head>
    <title>Unwaste Network</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="#">
    <meta name="keywords"
        content="Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="#">
    <!-- Favicon icon -->
    <link rel="icon" href="..\..\files\assets\images\favicon.ico" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="..\..\files\bower_components\bootstrap\css\bootstrap.min.css">
    <!-- radial chart.css -->
    <link rel="stylesheet" href="..\..\files\assets\pages\chart\radial\css\radial.css" type="text/css" media="all">
    <!-- feather Awesome -->
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\icon\feather\css\feather.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\css\style.css">
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\css\jquery.mCustomScrollbar.css">
    <link rel="stylesheet" type="text/css" href="../Css/Index.css">
   
    <link rel="stylesheet" href="..\files\bower_components\chartist\css\chartist.css" type="text/css" media="all">
</head>
<!-- Menu sidebar static layout -->

<body>
    <!-- Pre-loader start -->
    <div class="theme-loader">
        <div class="ball-scale">
            <div class='contain'>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Pre-loader end -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">

            <nav class="navbar header-navbar pcoded-header">
                <div class="navbar-wrapper">

                    <div class="navbar-logo">
                        <a class="mobile-menu" id="mobile-collapse" href="#!">
                            <i class="feather icon-menu"></i>
                        </a>
                        <a href="">
                            <img class="img-fluid" src="../../files/assets/images/Logo-1.jpeg" alt="Theme-Logo">
                        </a>
                        <a class="mobile-options">
                            <i class="feather icon-more-horizontal"></i>
                        </a>
                    </div>

                    <div class="navbar-container container-fluid">
                        <ul class="nav-left">
                            <li class="header-search">
                                <div class="main-search morphsearch-search">
                                    <div class="input-group">
                                        <span class="input-group-addon search-close"><i
                                                class="feather icon-x"></i></span>
                                        <input type="text" class="form-control">
                                        <span class="input-group-addon search-btn"><i
                                                class="feather icon-search"></i></span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="#!" onclick="javascript:toggleFullScreen()">
                                    <i class="feather icon-maximize full-screen"></i>
                                </a>
                            </li>
                        </ul>
                        <ul class="nav-right">
                            <li class="user-profile header-notification">
                                <div class="dropdown-primary dropdown">
                                    <div class="dropdown-toggle" data-toggle="dropdown">
                                        <img src="..\..\files\assets\images\avatar-4.jpg" class="img-radius"
                                            alt="User-Profile-Image">
                                        <span id="user"></span>
                                        <i class="feather icon-chevron-down"></i>
                                    </div>
                                    <ul class="show-notification profile-notification dropdown-menu"
                                        data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                        
                                        <li>
                                            <a href="../auth-normal-sign-in.htm">
                                                <i class="feather icon-log-out"></i> Logout
                                            </a>
                                        </li>
                                    </ul>

                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

    
      
            <div class="pcoded-main-container">
                <div class="pcoded-wrapper">
                    <nav class="pcoded-navbar">
                        <div class="pcoded-inner-navbar main-menu">
                    
                            <ul class="pcoded-item pcoded-left-item">
                                <li class=" ">
                                    <a href="../Dashboard/dashboard_Index.htm">
                                        <span class="pcoded-micon"><i class="feather icon-home"></i></span>
                                        <span class="pcoded-mtext">Dashboard</span>
                                    </a>
                                 
                                </li>
                                <li class="pcoded-hasmenu ">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-user" aria-hidden="true"></i></span>
                                        <span class="pcoded-mtext">Admin User</span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Admin-user/Add-admin.htm">
                                                <span class="pcoded-mtext">New Admin</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Admin-user/Admin-List.htm">
                                                <span class="pcoded-mtext">Admin List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu ">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-user-times"></i></span>
                                        <span class="pcoded-mtext">Driver Management</span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Driver-management/Add-Driver.htm">
                                                <span class="pcoded-mtext">New Driver</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Driver-management/Driver-List.htm">
                                                <span class="pcoded-mtext">Driver List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-car"></i></span>
                                        <span class="pcoded-mtext">Vehicle Management</span>
                                   
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Vehicle-management/Add-Vehicle.htm">
                                                <span class="pcoded-mtext">New Vehicle</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Vehicle-management/Vehicle-List.htm">
                                                <span class="pcoded-mtext">Vehicle List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-building"></i></span>
                                        <span class="pcoded-mtext">Apartment Management </span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Apartment-management/Add-Apartment.htm">
                                                <span class="pcoded-mtext">New Apartment</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Apartment-management/Apartment-List.htm">
                                                <span class="pcoded-mtext">Apartment List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                    
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="feather icon-layers"></i></span>
                                        <span class="pcoded-mtext">Waste Management</span>
                        
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Wastage-management/wastage-count.htm">
                                                <span class="pcoded-mtext">Wastage Count</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Wastage-management/wastage-weighs.htm">
                                                <span class="pcoded-mtext">Wastage Weighs</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Wastage-management/wastage-logs.htm">
                                                <span class="pcoded-mtext">Wastage Logs</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Wastage-management/unload-point.htm">
                                                <span class="pcoded-mtext">Unload point master</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-map-marker"></i></span>
                                        <span class="pcoded-mtext">Route Management </span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Route-management/Route-master.html">
                                                <span class="pcoded-mtext">Route master</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Route-management/Route-mapping.html">
                                                <span class="pcoded-mtext">Route mapping</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Route-management/Route-assigning.html">
                                                <span class="pcoded-mtext">Route assigning</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li class=" ">
                                    <a href="../Reports/Reports.htm">
                                        <span class="pcoded-micon"><i class="fa fa-signal"></i></span>
                                        <span class="pcoded-mtext">Report</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                    <div class="pcoded-content">
                        <div class="pcoded-inner-content">
                            <div class="main-body">
                                <div class="page-wrapper">
                                    <div class="page-body">

                                        <div class="row m-b-5">

                                            <!-- statustic-card start -->
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-yellow text-white">
                                                    <div class="card-block bg-white-cd">
                                                        <div class="row align-items-center">
                                                            <div class="col col-auto text-right">
                                                                <div class="card-icon-1-u icon1-bg">
                                                                    <i class='far fa-building'></i>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <p class="m-b-5 cd-txt-1">Apartments</p>
                                                                <h4 id="apartment_id" class="m-b-0 count-txt"></h4>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-yellow text-white">
                                                    <div class="card-block bg-white-cd">
                                                        <div class="row align-items-center">
                                                            <div class="col col-auto text-right">
                                                                <div class="card-icon-1-u icon2-bg">
                                                                    <i class='fas fa-truck'></i>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <p class="m-b-5 cd-txt-2">Vehicles</p>
                                                                <h4 id="vehicle_id" class="m-b-0 count-txt"></h4>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-yellow text-white">
                                                    <div class="card-block bg-white-cd">
                                                        <div class="row align-items-center">
                                                            <div class="col col-auto text-right">
                                                                <div class="card-icon-1-u icon3-bg">
                                                                    <i class='fas fa-user-alt'></i>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <p class="m-b-5 cd-txt-3">Drivers</p>
                                                                <h4 id="driver_id" class="m-b-0 count-txt"></h4>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-yellow text-white">
                                                    <div class="card-block bg-white-cd">
                                                        <div class="row align-items-center">
                                                            <div class="col col-auto text-right">
                                                                <div class="card-icon-1-u icon4-bg">
                                                                    <i class='fas fa-map-marker-alt'></i>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <p class="m-b-5 cd-txt-4">Total Routes</p>
                                                                <h4 id="route_id" class="m-b-0 count-txt"></h4>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- statustic-card start -->
                                        </div>

                                        <div class="row">

                                            <!-- statustic-card start -->
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-blue text-white">
                                                    <div class="card-block">
                                                        <div class="col icon-flx">
                                                            <div class="icon-bdr">
                                                                <span class="icon1-bg card-icon-u card-icon-u-1">
                                                                    <i class='fas fa-weight-hanging'></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="row align-items-center">
                                                            <div class="col">
                                                                <h4 id="wastage-id" class="m-b-0">1000 kg</h4>
                                                                <p class="m-b-5">Total Wastage till date</p>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-pink text-white">
                                                    <div class="card-block">
                                                        <div class="col icon-flx">
                                                            <div class="icon-bdr">
                                                                <span class="icon2-bg card-icon-u">
                                                                    <i class='far fa-trash-alt'></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="row align-items-center">
                                                            <div class="col">
                                                                <h4 id="dry-id" class="m-b-0">200</h4>
                                                                <p class="m-b-5">Dry Waste</p>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-green text-white">
                                                    <div class="card-block">
                                                        <div class="col icon-flx">
                                                            <div class="icon-bdr">
                                                                <span class="icon3-bg card-icon-u">
                                                                    <i class='far fa-trash-alt'></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="row align-items-center">
                                                            <div class="col">
                                                                <h4 id="wet-id" class="m-b-0">150</h4>
                                                                <p class="m-b-5">Wet Waste</p>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-3 col-md-6">
                                                <div class="card bg-c-yellow text-white">
                                                    <div class="card-block">
                                                        <div class="col icon-flx">
                                                            <div class="icon-bdr">
                                                                <span class="icon4-bg card-icon-u">
                                                                    <i class='far fa-trash-alt'></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="row align-items-center">
                                                            <div class="col">
                                                                <h4 id="hazardous-id" class="m-b-0">63</h4>
                                                                <p class="m-b-5">Hazardous Waste</p>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- statustic-card start -->

                                            <!-- statustic-card start -->
                                            <div class="col-xl-12 col-md-12">
                                                <div class="card" style="overflow-x: scroll;">
                                                    <div class="card-header">
                                                        <div class="card-header-left ">
                                                            <h5>Monthly View</h5>
                                                            <span class="text-muted">For more details about usage,
                                                                please refer <a
                                                                    href="https://www.amcharts.com/online-store/"
                                                                    target="_blank">amCharts</a> licences.</span>
                                                        </div>
                                                    </div>
                                                    <div class="card-block-big" >
                                                        <!-- <div id="monthly-graph" style="height:250px"></div> -->
                                                        <!-- <div class="card-block"> -->
                                                            <div id="morris-bar-chart" style="height:350px"></div>
                                                        <!-- </div> -->
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- statustic-card start -->

                                        </div>
                                    </div>
                                </div>

                                <div id="styleSelector">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- api -->
    <script type="text/javascript" src="..\..\files\assets\js\api-conditions.js"></script>
    <!-- Required Jquery -->
    <script type="text/javascript" src="..\..\files\bower_components\jquery\js\jquery.min.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\jquery-ui\js\jquery-ui.min.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\popper.js\js\popper.min.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\bootstrap\js\bootstrap.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="..\..\files\bower_components\jquery-slimscroll\js\jquery.slimscroll.js"></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="..\..\files\bower_components\modernizr\js\modernizr.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\modernizr\js\css-scrollbars.js"></script>
    <!-- Chart js -->
    <script type="text/javascript" src="..\..\files\bower_components\chart.js\js\Chart.js"></script>
     <!-- Chartlist charts -->
     <script src="..\..\files\bower_components\chartist\js\chartist.js"></script>
     <script src="..\..\files\assets\pages\chart\chartlist\js\chartist-plugin-threshold.js"></script>
     <script src="..\..\files\bower_components\raphael\js\raphael.min.js"></script>
     <script src="..\..\files\bower_components\morris.js\js\morris.js"></script>
    <script src="..\..\files\assets\pages\chart\morris\morris-custom-chart.js"></script>
    <!-- Google map js -->
    <script
        src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="..\..\files\assets\pages\google-maps\gmaps.js"></script>
    <!-- gauge js -->
    <script src="..\..\files\assets\pages\widget\gauge\gauge.min.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\amcharts.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\serial.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\gauge.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\pie.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\light.js"></script>
    <!-- Custom js -->
    <script src='../js/icon.js'></script>
    <script src="..\..\files\assets\js\pcoded.min.js"></script>
    <script src="..\..\files\assets\js\vartical-layout.min.js"></script>
    <script src="..\..\files\assets\js\jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="..\..\files\assets\pages\dashboard\crm-dashboard.min.js"></script>
    
    <script type="text/javascript" src="..\..\files\assets\js\script.js"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
    <script>
    
</script>
    <script>
        var myHeaders = new Headers();
                let token =loginCheck().data.token
        myHeaders.append("Authorization", `Bearer   ${token}`);
        
            //Fetch Data into table
            var requestOptions = {
          method: 'GET',
          headers: myHeaders,
          redirect: 'follow'
        };

        function groupBy(objectArray, property) {
  return objectArray.reduce(function (acc, obj) {
    var key = obj[property];
    if (!acc[key]) {
      acc[key] = [];
    }
    acc[key].push(obj);
    return acc;
  }, {});
}

        
        fetch("http://assistlysolutions.com/ndl/api/dashboard", requestOptions)
          .then(response => response.json())
          .then(result => {
            document.getElementById('apartment_id').innerHTML = result.data.apartment.active;
            document.getElementById('driver_id').innerHTML = result.data.drivers.active;
            document.getElementById('route_id').innerHTML = result.data.routes.active;
            document.getElementById('vehicle_id').innerHTML = result.data.apartment.active;
            document.getElementById('wastage-id').innerHTML = result.data.wastage.total;
            document.getElementById('dry-id').innerHTML = result.data.vehicle[0].vehicle_count;
            document.getElementById('wet-id').innerHTML = result.data.vehicle[1].vehicle_count;
            document.getElementById('hazardous-id').innerHTML = result.data.vehicle[2].vehicle_count;
            
            let fetchData = result.data['wastage_log_count_by_date'];
            // fetchData = [...fetchData, {date: '2023-04-13', name: 'Wet', count: '89.00' }, {date: '2023-04-13', name: 'Hazardous', count: '9.00' },{date: '2023-04-17', name: 'Wet', count: '5.00' }]
            var wastesData = groupBy(fetchData, 'date');
            console.log('groupedPeople', wastesData)
            const finalData = [];
            for(key in wastesData) {
                if(wastesData.hasOwnProperty(key)) {
                    var temp = {}
                    wastesData[key].map((data) => {
                        temp.date = data.date;
                        console.log('data', data)
                        if(data.name === 'Wet') {
                            
                            temp = {...temp, wet: data.count};
                        } else if(data.name === 'Dry')
                        temp = {...temp, dry: data.count};
                        else if(data.name === 'Hazardous')
                        temp = {...temp, hazardous: data.count}
                    })
                }
                console.log('fina',temp)
                finalData.push(temp);
            }

            Morris.Bar({
        element: 'morris-bar-chart',
        data: finalData,
        xkey: 'date',
        ykeys: ['dry', 'wet', 'hazardous'],
        labels: ['Dry', 'Wet', 'Hazardous'],
        barColors: ['#5FBEAA', '#5D9CEC', '#cCcCcC'],
        hideHover: 'auto',
        gridLineColor: '#eef0f2',
        resize: true
    });
        
          })
          .catch(error => console.log('error', error));
          </script>
           <script>
            $(function() {
                $('#sidebar').load('../sidebar/sidebar.html')
            })
        </script>

<script>
    let profile = loginCheck()
    console.log(profile)
    document.getElementById('user').innerHTML = profile.data.name
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-23581568-13');
    </script>
</body>

</html>