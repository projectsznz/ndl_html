<!DOCTYPE html>
<html lang="en">

<head>
    <title>Unwaste Network</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="#">
    <meta name="keywords"
        content="Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="#">
    <!-- Favicon icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <!-- Favicon icon -->
    <link rel="icon" href="..\..\files\assets\images\favicon.ico" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="..\..\files\bower_components\bootstrap\css\bootstrap.min.css">
    <!-- themify-icons line icon -->
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\icon\themify-icons\themify-icons.css">
    <!-- ico font -->
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\icon\icofont\css\icofont.css">
    <!-- feather Awesome -->
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\icon\feather\css\feather.css">
    <!-- foo table Grid
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\pages\foo-table\css\footable.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\pages\foo-table\css\jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\pages\foo-table\css\footable.standalone.min.css"> -->
    <!-- Datatables -->
    <link rel="stylesheet" type="text/css" href="..\..\files\bower_components\datatables.net-bs4\css\dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\pages\data-table\css\buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="..\..\files\bower_components\datatables.net-responsive-bs4\css\responsive.bootstrap4.min.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\css\style.css">
    <link rel="stylesheet" type="text/css" href="../Css/Index.css">
    <link rel="stylesheet" type="text/css" href="..\..\files\assets\css\jquery.mCustomScrollbar.css">
</head>

<body>
    <!-- Pre-loader start -->
    <div class="theme-loader">
        <div class="ball-scale">
            <div class='contain'>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Pre-loader end -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">


            <nav class="navbar header-navbar pcoded-header">
                <div class="navbar-wrapper">

                    <div class="navbar-logo">
                        <a class="mobile-menu" id="mobile-collapse" href="#!">
                            <i class="feather icon-menu"></i>
                        </a>
                        <a href="">
                            <img class="img-fluid" src="../../files/assets/images/Logo-1.jpeg" alt="Theme-Logo">
                        </a>
                        <a class="mobile-options">
                            <i class="feather icon-more-horizontal"></i>
                        </a>
                    </div>

                    <div class="navbar-container container-fluid">
                        <ul class="nav-left">
                            <li class="header-search">
                                <div class="main-search morphsearch-search">
                                    <div class="input-group">
                                        <span class="input-group-addon search-close"><i
                                                class="feather icon-x"></i></span>
                                        <input type="text" class="form-control">
                                        <span class="input-group-addon search-btn"><i
                                                class="feather icon-search"></i></span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="#!" onclick="javascript:toggleFullScreen()">
                                    <i class="feather icon-maximize full-screen"></i>
                                </a>
                            </li>
                        </ul>
                        <ul class="nav-right">
                            <li class="user-profile header-notification">
                                <div class="dropdown-primary dropdown">
                                    <div class="dropdown-toggle" data-toggle="dropdown">
                                        <img src="..\..\files\assets\images\avatar-4.jpg" class="img-radius"
                                            alt="User-Profile-Image">
                                        <span id="user"></span>
                                        <i class="feather icon-chevron-down"></i>
                                    </div>
                                    <ul class="show-notification profile-notification dropdown-menu"
                                        data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                     
                                        <li>
                                            <a href="../auth-normal-sign-in.htm">
                                                <i class="feather icon-log-out"></i> Logout
                                            </a>
                                        </li>
                                    </ul>

                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>


            <div class="pcoded-main-container">
                <div class="pcoded-wrapper">
                    <nav class="pcoded-navbar">
                        <div class="pcoded-inner-navbar main-menu">
                    
                            <ul class="pcoded-item pcoded-left-item">
                                <li class=" ">
                                    <a href="../Dashboard/dashboard_Index.htm">
                                        <span class="pcoded-micon"><i class="feather icon-home"></i></span>
                                        <span class="pcoded-mtext">Dashboard</span>
                                    </a>
                                 
                                </li>
                                <li class="pcoded-hasmenu ">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-user" aria-hidden="true"></i></span>
                                        <span class="pcoded-mtext">Admin User</span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Admin-user/Add-admin.htm">
                                                <span class="pcoded-mtext">New Admin</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Admin-user/Admin-List.htm">
                                                <span class="pcoded-mtext">Admin List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu ">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-user-times"></i></span>
                                        <span class="pcoded-mtext">Driver Management</span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Driver-management/Add-Driver.htm">
                                                <span class="pcoded-mtext">New Driver</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Driver-management/Driver-List.htm">
                                                <span class="pcoded-mtext">Driver List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-car"></i></span>
                                        <span class="pcoded-mtext">Vehicle Management</span>
                                   
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Vehicle-management/Add-Vehicle.htm">
                                                <span class="pcoded-mtext">New Vehicle</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Vehicle-management/Vehicle-List.htm">
                                                <span class="pcoded-mtext">Vehicle List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-building"></i></span>
                                        <span class="pcoded-mtext">Apartment Management </span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Apartment-management/Add-Apartment.htm">
                                                <span class="pcoded-mtext">New Apartment</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Apartment-management/Apartment-List.htm">
                                                <span class="pcoded-mtext">Apartment List</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                    
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="feather icon-layers"></i></span>
                                        <span class="pcoded-mtext">Waste Management</span>
                        
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Wastage-management/wastage-count.htm">
                                                <span class="pcoded-mtext">Wastage Count</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Wastage-management/wastage-weighs.htm">
                                                <span class="pcoded-mtext">Wastage Weighs</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Wastage-management/wastage-logs.htm">
                                                <span class="pcoded-mtext">Wastage Logs</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Wastage-management/unload-point.htm">
                                                <span class="pcoded-mtext">Unload point master</span>
                                            </a>
                                        </li>
                    
                                    </ul>
                                </li>
                                <li class="pcoded-hasmenu">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="fa fa-map-marker"></i></span>
                                        <span class="pcoded-mtext">Route Management </span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="../Route-management/Route-master.html">
                                                <span class="pcoded-mtext">Route master</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Route-management/Route-mapping.html">
                                                <span class="pcoded-mtext">Route mapping</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="../Route-management/Route-assigning.html">
                                                <span class="pcoded-mtext">Route assigning</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li class=" ">
                                    <a href="../Reports/Reports.htm">
                                        <span class="pcoded-micon"><i class="fa fa-signal"></i></span>
                                        <span class="pcoded-mtext">Report</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                    <div class="pcoded-content">
                        <div class="pcoded-inner-content">
                            <div class="main-body">
                                <div class="page-wrapper pd-t">
                                    <!-- Page-header start -->
                                    <div class="page-header ">
                                        <div class="row ">
                                            <div class="col-lg-12">
                                                <div class="page-header-breadcrumb">
                                                    <ul class="breadcrumb-title">
                                                        <li class="breadcrumb-item">
                                                            <a href="../Dashboard/dashboard_Index.htm"> <i
                                                                    class="feather icon-home"></i>
                                                            </a>
                                                        </li>
                                                        <li class="breadcrumb-item"><a>Route
                                                                Management / Route mapping</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Page-header end -->
                                    <div class="page-body">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <!-- Page-body-2 start -->
                                                <div class="page-body">
                                                    <!-- Filtering Foo-table card start -->
                                                    <div class="card-block">
                                                        <div class="dt-responsive table-responsive">
                                                            <button type="button"
                                                                style="padding: 7px 15px; float: right; margin-right: 30px"
                                                                data-toggle="modal" data-target="#Create">Add</button>
                                                            <table id="demo-foo-filtering" class="table table-striped table-bordered nowrap">
                                                                <thead>
                                                                    <tr>
                                                                        <th>S.No</th>
                                                                        <th>Route name</th>
                                                                        <th>Apartment Name</th>
                                                                        <th>Priority </th>
                                                                        <th>Status</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tfoot>
                                                                    <tr>
                                                                        <th>S.No</th>
                                                                        <th>Route name</th>
                                                                        <th>Apartment Name</th>
                                                                        <th>Priority </th>
                                                                        <th>Status</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                    </tfoot>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <!-- Filtering Foo-table card end -->
                                                    <div id="Result-Message" class="modal fade bd-example-modal-sm"
                                                    tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
                                                    aria-hidden="true">
                                                    <div class="modal-dialog modal-sm">

                                                        <div class="modal-content">
                                                            <!-- Div you want to update the content -->
                                                            <div class="modal-body modal-content-message">

                                                            </div>
                                                        </div>
                                                        <div class="modal-footer-message submit-btn">
                                                            <button type="button" onclick="closeMessage()"
                                                                class="btn btn-primary waves-effect waves-light closeMessage btn-square"
                                                                data-dismiss="modal">Ok</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                </div>
                                                <!-- Page-body end -->
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div id="styleSelector">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="Edit" role="dialog">
        <div class="modal-dialog modal-update">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Update route mapping </h4>
                </div>
                <div class="modal-body">
                    <form id="update-route-master-form">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Route name</label>
                                <input type="text" name="route-name" class="col-12 form-control" id="route-name">
                                <input type="hidden" id="route_id" name="route_id">
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Apartment Name</label>
                                <input type="text" name="apartment-name" class="col-12 form-control" id="apartment-name">
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Status</label>
                                <select class="form-control" name="status" id="status">
                                    <option value="0">Active</option>
                                    <option value="1">Disabled</option>
                                </select>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Priority</label>
                                <input type="number" name="priority_edit" class="col-12 form-control" id="priority_edit">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer submit-btn">
                    <button type="button" class="btn btn-primary waves-effect waves-light updateRouteMapping btn-square"
                        data-dismiss="modal">Update</button>
                    <button type="button" class="btn btn-primary btn-outline-primary"
                        data-dismiss="modal">Cancel</button>

                </div>
            </div>

        </div>
    </div>
    <div class="modal fade" id="Create" role="dialog">
        <div class="modal-dialog modal-update">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Create Route Master </h4>
                </div>
                <div class="modal-body">
                    <form id="create-route-mapping-form">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Route master</label>
                                <select name="route_name" class="col-12 form-control"
                                    id="route_name">
                                    <option value="all">All</option>
                                </select>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Apartment Name</label>
                                <select name="apartment_name" class="col-12 apartment-name form-control"
                                    id="apartment_name">
                                    <option value="all">All</option>
                                </select>
                                <!-- <input type="text" class="form-control"
                                    name="vehicle-id"> -->
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Status</label>
                                <select class="form-control" name="status" id="createStatus">
                                    <option value="0">Active</option>
                                    <option value="1">Disabled</option>
                                </select>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 mg-btm">
                                <label class=" col-form-label">Priority</label>
                                <input type="number" name="priority" class="col-12 form-control" id="priority">
                            </div>

                        </div>
                    </form>
                </div>
                <div class="modal-footer submit-btn">
                    <button type="button"
                        class="btn btn-primary waves-effect waves-light add btn-square"
                        data-dismiss="modal">Create</button>
                    <button type="button" class="btn btn-primary btn-outline-primary"
                        data-dismiss="modal">Cancel</button>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Required Jquery -->
    <!-- import  jquery form website-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script type="text/javascript" src="..\..\files\assets\js\api-conditions.js"></script>

    <script type="text/javascript" src="..\..\files\bower_components\jquery\js\jquery.min.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\jquery-ui\js\jquery-ui.min.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\popper.js\js\popper.min.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\bootstrap\js\bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="..\..\files\bower_components\datatables.net\js\jquery.dataTables.min.js"></script>
    <script src="..\..\files\bower_components\datatables.net-buttons\js\dataTables.buttons.min.js"></script>
    <script src="..\..\files\assets\pages\data-table\js\jszip.min.js"></script>
    <script src="..\..\files\assets\pages\data-table\js\pdfmake.min.js"></script>
    <script src="..\..\files\assets\pages\data-table\js\vfs_fonts.js"></script>
    <script src="..\..\files\bower_components\datatables.net-buttons\js\buttons.print.min.js"></script>
    <script src="..\..\files\bower_components\datatables.net-buttons\js\buttons.html5.min.js"></script>
    <script src="..\..\files\bower_components\datatables.net-bs4\js\dataTables.bootstrap4.min.js"></script>
    <script src="..\..\files\bower_components\datatables.net-responsive\js\dataTables.responsive.min.js"></script>
    <script src="..\..\files\bower_components\datatables.net-responsive-bs4\js\responsive.bootstrap4.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript"
        src="..\..\files\bower_components\jquery-slimscroll\js\jquery.slimscroll.js"></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="..\..\files\bower_components\modernizr\js\modernizr.js"></script>
    <script type="text/javascript" src="..\..\files\bower_components\modernizr\js\css-scrollbars.js"></script>
    <!-- Chart js -->
    <script type="text/javascript" src="..\..\files\bower_components\chart.js\js\Chart.js"></script>
    <!-- Google map js -->
    <script
        src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="..\..\files\assets\pages\google-maps\gmaps.js"></script>
    <!-- gauge js -->
    <script src="..\..\files\assets\pages\widget\gauge\gauge.min.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\amcharts.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\serial.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\gauge.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\pie.js"></script>
    <script src="..\..\files\assets\pages\widget\amchart\light.js"></script>
    <!-- Custom js -->
    <script src='..\js\common_select.js'></script>

    <script src="..\..\files\assets\js\pcoded.min.js"></script>
    <script src="..\..\files\assets\js\vartical-layout.min.js"></script>
    <script src="..\..\files\assets\js\jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="..\..\files\assets\pages\dashboard\crm-dashboard.min.js"></script>
    <script type="text/javascript" src="..\..\files\assets\js\script.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
    <script>
        $(function () {
            $('#sidebar').load('../sidebar/sidebar.html')
        })
    </script>
<style>
    button.btn.dropdown-toggle.btn-light.bs-placeholder {
    display: none;
}
button.btn.dropdown-toggle.btn-light{
    display: none;
}
</style>
<script>
    $(function () {
        var myHeaders = new Headers();

        let token = loginCheck().data.token
        myHeaders.append("Authorization", `Bearer ${token}`);
        var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            redirect: 'follow'
        };

        // Apartment dropdown
         appendSelectOptions("api/route", requestOptions, '#route_name', "id", "name", "create-route-mapping-form")
        // vehicle list Dropdown
        appendSelectOptions("api/apartment", requestOptions, '#apartment_name', "id", "name", "create-route-mapping-form")
     

    })
    </script>
    <script>
        var myHeaders = new Headers();
        let token = loginCheck().data.token
        console.log('token', token)
        myHeaders.append("Authorization", `Bearer ${token}`);

        var preUpdateMaster = {}
        function updateRouteMapping(id, name, wastage_name, apartment_name, status,priority, route_id) {
            // Apartment dropdown
            // appendSelectOptions("api/route", requestOptions, '#route-name', "id", "name", "update-route-master-form")
            //         // vehicle list Dropdown
            //         appendSelectOptions("api/apartment", requestOptions, '#apartment-name', "id", "name", "update-route-master-form")
            // // console.log(e)
            // alert(id);
            // $('#route-name option[value='+id+']').attr('selected','selected');
            // alert(priority);
            document.getElementById("route-name").value = name;
            document.getElementById("apartment-name").value = apartment_name;
            document.getElementById("status").value = status;
            document.getElementById("priority_edit").value = priority;
            preUpdateMaster = { id, name, wastage_name, apartment_name, status }
        }

        const update = document.querySelector('.updateRouteMapping');
        update.addEventListener('click', (e) => {
            e.preventDefault()
            let routeName = document.getElementById('route-name').value;
            // let apartmentName = document.getElementById('apartment-name').value;
            let status = document.getElementById('status').value;
            let priority = document.getElementById('priority_edit').value;

            var formdata = new FormData();
            // console.log('check', routeName, wastageType, apartmentName, status)
            formdata.append("route_id", routeName);
            // formdata.append("apartment_id", apartmentName);
            formdata.append("status", status);
            formdata.append("priority", priority);
            formdata.append("id", preUpdateMaster.id);
            var updateRequestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: formdata,
                redirect: 'follow'
            };
            fetch("http://assistlysolutions.com/ndl/api/route-mapping/edit", updateRequestOptions)
                .then(response => response.json())
                .then(result => {
                    console.log(result)
                                if(result.success== true){
                                    Swal.fire({
                                    position: 'top-end',
                                    icon: 'success',
                                    title: result.message,
                                    showConfirmButton: false,
                                    timer: 1000
                                })
                                setTimeout(
                                function() 
                                {
                                    document.location.reload(true);
                                    //do something special
                                }, 5000);
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Oops...',
                                    text: result.message
                                })
                            }
                })
                .then(err => {
                    console.log('error-update', err)
                    $('.modal-content-message').text(err)
                    $('#Result-Message').modal('toggle')
                })
                .finally(() => document.getElementById('update-route-master-form').reset())
        })

        

        var requestOptions = {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
        };


        fetch("http://assistlysolutions.com/ndl/api/route-mapping/list", requestOptions)
            .then(response => response.json())
            .then(result => {
                // console.log(result);
                let contentTable = document.querySelector('.table')
                let contentTbody = document.createElement('tbody')
                contentTable.appendChild(contentTbody)
                let sno = 0;
                let data_load = false
                result.data.map((data) => {
                    console.log(data)
                    sno = sno + 1;
                    let data_load = true
                    let routeStatus = ""
                    if (data.status == "0") {
                        routeStatus = "Active"
                    } else {
                        routeStatus = "Inactive"
                    }
                    let rowList = `<tr>
                        <td>${sno}</td>
                        <td>${data.route_master_name}</td>
                        <td>${data.apratments_name}</td>
                        <td>${data.priority}</td>
                        <td>${routeStatus}</td>
                        <td>
                            <button type="button" class="tab-edit-btn"
                                data-toggle="modal"
                                data-id=${data.id}
                                data-name=${data.route_master_name}
                                data-wastage_name=${data.wastage_name}
                                data-apartment_name=${data.apratments_name}
                                data-status=${data.status}
                                data-priority=${data.priority}
                                data-route_id=${data.route_id}
                                data-target="#Edit" onclick="updateRouteMapping(this.getAttribute('data-id'),this.getAttribute('data-name'), this.getAttribute('data-wastage_name'), this.getAttribute('data-apartment_name'), this.getAttribute('data-status'), this.getAttribute('data-priority'), this.getAttribute('data-route_id'))">
                                Edit</button>
                        </td>
                    </tr>
    `
                    contentTbody.innerHTML += rowList;
                })
                if(result.data.length >0){
                        $(document).ready( function () {
                            $('.table').DataTable({
                                "dom": 'rtip',
                                "searching": false,
                                "paging": true,
                                "scrollX": true,
                                "columnDefs": [
                                    { "orderable": false, "targets": [ -1 ] }
                                ],
                                "iDisplayLength": 10
                            });
                        } );
                    }

            })
            .catch(error => console.log('error', error));


            //Add route master API starts
            const form = document.querySelector('form');
                const add = document.querySelector('.add');
                add.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    let routeMaster = document.getElementById('route_name');
                    let apartment_id = document.getElementsByClassName('apartment-name')[0];
                    let priority = document.getElementById('priority');
                    let status = document.getElementById('createStatus');
                    // alert(upload_point.value);
                    var formdata = new FormData();
                    formdata.append("route_id", routeMaster.value);
                    formdata.append("apartment_id", apartment_id.value);
                    formdata.append("status", status.value);
                    formdata.append("priority", priority.value);
                    // alert(routeMaster.value);



                    var requestOptions = {
                        method: 'POST',
                        headers: myHeaders,
                        body: formdata,
                        redirect: 'follow'
                    };

                    fetch("http://assistlysolutions.com/ndl/api/route-mapping/create", requestOptions)
                        .then(response => response.json())
                        .then(result => {
                            console.log(result)
                                if(result.success== true){
                                    Swal.fire({
                                    position: 'top-end',
                                    icon: 'success',
                                    title: result.message,
                                    showConfirmButton: false,
                                    timer: 1000
                                })
                                setTimeout(
                                function() 
                                {
                                    document.location.reload(true);
                                    //do something special
                                }, 5000);
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Oops...',
                                    text: result.message
                                })
                            }
                            

                            
                            // alert(result.message);
                            // document.location.reload(true);
                    //         $('#Result-Message').modal('toggle')
                    // let contentMessage = document.querySelector('.modal-content-message');
                    // let contentstatus = document.createElement('div')
                    // contentstatus.innerHTML = "<p>" + result.message + "</p>"
                    // contentMessage.appendChild(contentstatus)
                        })
                        .catch(error => {
                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: error,
                                footer: '<a href="">Why do I have this issue?</a>'
                            })
                            console.log('error', error)
                            $('.modal-content-message').text(error)
                            $('#Result-Message').modal('toggle')
                        })
                        .finally(() => document.getElementById('create-route-mapping-form').reset())
                });
            //Add route master API ends

    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-23581568-13');
    </script>
</body>

</html>
